<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Apache-get-video-thumbnail : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Apache-get-video-thumbnail</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/dayvson/Apache-Get-Video-Thumbnail">View on GitHub</a>

          <h1 id="project_title">Apache-get-video-thumbnail</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/dayvson/Apache-Get-Video-Thumbnail/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/dayvson/Apache-Get-Video-Thumbnail/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Apache Video Thumb Extractor is a module for Apache2 to extract an image from a video in a specific 
second, you also can resizing/cropping it to a given size and extract a storyboard(multiple video frames on sprite) from video.</p>

<h3>Requirements</h3>

<p>This module depends from some libraries (headers and shared objects) which has to be installed before it:
To install FFmpeg from source with the specified versions follow the steps bellow:</p>

<pre><code>git clone git://git.videolan.org/ffmpeg
cd ffmpeg
git checkout n0.8.7 -b tag_n0.8.7
./configure --prefix=/usr --disable-ffserver --disable-ffplay --enable-shared
make
make install
</code></pre>

<h3>Requirements</h3>

<p>All of these libraries was commonly distributed with "FFmpeg":<a href="http://ffmpeg.org">http://ffmpeg.org</a> or in "LIBAV"</p>

<table>
<tr>
<td>LIBRARY</td>
<td>VERSION</td>
</tr>
<tr>
<td>avformat</td>
<td>&gt;= 53.4.0</td>
</tr>
<tr>
<td>avcodec</td>
<td>&gt;= 53.7.0</td>
</tr>
<tr>
<td>avutil</td>
<td>&gt;= 51.9.1</td>
</tr>
<tr>
<td>swscale</td>
<td>&gt;= 2.0.0</td>
</tr>
<tr>
<td>libjpeg</td>
<td>*</td>
</tr>
</table><h3>How to compile</h3>

<p>You can run the tests, and see video.jpg and storyboard.jpg saved file from demo video</p>

<pre><code>make test
</code></pre>

<p>To compile and install this module on your apache run the command bellow, this action will create a video_thumbnail.so file and put this your Apache module folder. 
Please check defines.mk file to set your path for installation. 
Use this till I create a easy way to install like using autotools *</p>

<pre><code>make install
</code></pre>

<h3>Apache configuration</h3>

<p>To enable this module after installation edit httpd.conf file and in module section add<br>
LoadModule videothumb_module [module_path]/mod_videothumb.so
[module_path] =&gt; Apache Directory modules in your architecture *</p>

<ul>
<li>
<strong>VideoThumb_Enabled</strong> true =&gt; Enable videothumb module</li>
<li>
<strong>VideoThumb_MediasPath</strong> /www/my_videos/ =&gt; Path for videos in your filesystem</li>
<li>
<strong>VideoThumb_AppPath</strong> /thumbnails/ =&gt; Path for which you want the module to respond (the URI path)</li>
<li>
<strong>VideoThumb_JpegQuality</strong> 90 =&gt; Jpeg compress quality</li>
</ul><h3>How to use</h3>

<p>After enable this module you can access using these urls
This module can receive four parameters:</p>

<ul>
<li>
<strong>second</strong>      =&gt; Second of video (this module get the nearest keyframe to second) (Optional parameter in storyboard)</li>
<li>
<strong>width</strong>       =&gt; Optional parameter to resize width video frame</li>
<li>
<strong>height</strong>      =&gt; Optional parameter to resize height video frame</li>
<li>
<strong>split</strong>       =&gt; Optional parameter to create a storyboard if you define split=10 this module will return 10 frames from the beginner until the end of video</li>
<li>
<strong>columns</strong>     =&gt; Optional parameter to use with split parameter to define how many columns your storyboard must have</li>
<li>
<strong>currentPage</strong> =&gt; Optional parameter to define the current page of storyboard</li>
<li><p><strong>pageSize</strong>    =&gt; Optional parameter to define how many frame one storyboard page must have</p></li>
<li><p>If you don't use width or height parameters, the frame dimension will be equal to the video*</p></li>
<li><p>If you use split parameter you can't use second parameter, this function return a sprite with frames in a jpeg file*</p></li>
</ul><h3>Extract an unique video frame:</h3>

<pre><code>http://your_host.org/thumbnails/bigbunny.ogg?second=30
http://your_host.org/thumbnails/bigbunny.ogg?second=30&amp;width=640
http://your_host.org/thumbnails/bigbunny.ogg?second=30&amp;width=640&amp;height=360
</code></pre>

<p><img src="http://github.com/dayvson/Apache-Get-Video-Thumbnail/blob/master/sample_frame.jpg?raw=true" title="Sample single frame"></p>

<h3>Extract a storyboard frames(with(out) pagination):</h3>

<pre><code>http://your_host.org/thumbnails/bigbunny.ogg?height=100&amp;split=30
http://your_host.org/thumbnails/bigbunny.ogg?height=100&amp;split=30&amp;columns=3
http://your_host.org/thumbnails/bigbunny.ogg?height=100&amp;split=30&amp;columns=3&amp;currentPage=1&amp;pageSize=9
</code></pre>

<p><img src="http://github.com/dayvson/Apache-Get-Video-Thumbnail/blob/master/sample_storyboard.jpg?raw=true" title="Sample Storyboard"></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Apache-get-video-thumbnail maintained by <a href="https://github.com/dayvson">dayvson</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
